<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Monitoring Ability Free Practice (10 items)</title>
  <style>
    body {
      margin: 0;
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background: #f7fafb;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
    }
    h1 {
      margin-bottom: 1rem;
      font-weight: 500;
      font-size: 1.4rem;
    }
    #circle {
      position: relative;
      width: 280px;
      height: 280px;
      border-radius: 50%;
      background: #a8d5e2;
      overflow: hidden;
      margin-bottom: 1rem;
    }
    .dot {
      position: absolute;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #fff;
    }
    #choices {
      display: flex;
      gap: .75rem;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 1.5rem;
    }
    .choice {
      padding: .5rem .9rem;
      background: #4a90e2;
      border: none;
      border-radius: 6px;
      color: #fff;
      font-size: 1rem;
      cursor: pointer;
    }
    .choice:hover { opacity: .85; }
    #result {
      display: none;
    }
    #result p {
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }
    #retake {
      padding: .6rem 1.2rem;
      background: #4a90e2;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
    }
    #retake:hover { opacity: .85; }
  </style>
</head>
<body>

  <h1 id="title">Free Practice: How many objects did you see?</h1>
  <div id="circle"></div>
  <div id="choices"></div>
  <div id="result">
    <p id="scoreText"></p>
    <button id="retake">Retake Test</button>
  </div>

  <script>
    const questions = [3,7,5,9,4,6,8,3,9,5];
    let current = 0, score = 0, dots = [], startTime = null;

    const title   = document.getElementById('title');
    const circle  = document.getElementById('circle');
    const choices = document.getElementById('choices');
    const result  = document.getElementById('result');
    const scoreText = document.getElementById('scoreText');
    const retakeBtn = document.getElementById('retake');

    function loadQuestion() {
      // reset UI
      title.textContent = `Question ${current+1} of ${questions.length}`;
      circle.innerHTML = '';
      choices.innerHTML = '';
      result.style.display = 'none';
      circle.style.display = '';
      choices.style.display = '';

      // create choice buttons
      for (let n = 3; n <= 9; n++) {
        const btn = document.createElement('button');
        btn.textContent = n;
        btn.className = 'choice';
        btn.onclick = () => {
          if (n === questions[current]) score++;
          current++;
          if (current < questions.length) {
            loadQuestion();
          } else {
            showResults();
          }
        };
        choices.appendChild(btn);
      }

      // create moving dots
      dots = [];
      const count = questions[current];
      for (let i = 0; i < count; i++) {
        const d = document.createElement('div');
        d.className = 'dot';
        // random start position
        const ang = Math.random() * 2 * Math.PI;
        const rad = Math.random() * (140 - 10);
        d.x = 140 + rad * Math.cos(ang);
        d.y = 140 + rad * Math.sin(ang);
        // random velocity
        const sp = 30 + Math.random() * 50;
        const dir= Math.random() * 2 * Math.PI;
        d.vx = Math.cos(dir) * sp;
        d.vy = Math.sin(dir) * sp;
        circle.appendChild(d);
        dots.push(d);
      }

      // animate (optional: they can answer anytime)
      startTime = null;
      function animate(ts) {
        if (!startTime) startTime = ts;
        const elapsed = ts - startTime;
        const dt = (Math.min(elapsed, 4000) - (animate.last || 0)) / 1000;
        dots.forEach(d => {
          d.x += d.vx * dt;
          d.y += d.vy * dt;
          // bounce off edge
          const dx = d.x - 140, dy = d.y - 140;
          if (Math.hypot(dx,dy) > 140) {
            const norm = Math.hypot(dx,dy);
            const nx = dx / norm, ny = dy / norm;
            const proj = d.vx * nx + d.vy * ny;
            d.vx -= 2 * proj * nx;
            d.vy -= 2 * proj * ny;
            d.x = 140 + nx * 140;
            d.y = 140 + ny * 140;
          }
          d.style.transform = `translate(${d.x-9}px,${d.y-9}px)`;
        });
        animate.last = Math.min(elapsed, 4000);
        if (elapsed < 4000) requestAnimationFrame(animate);
      }
      requestAnimationFrame(animate);
    }

    function showResults() {
      // hide test UI
      circle.style.display = 'none';
      choices.style.display = 'none';
      // show results
      scoreText.textContent = `Your score: ${score} / ${questions.length}`;
      result.style.display = '';
      title.textContent = 'Test Complete!';
    }

    retakeBtn.onclick = () => {
      current = 0;
      score = 0;
      loadQuestion();
    };

    // start
    loadQuestion();
  </script>

</body>
</html>

  </script>

</body>
</html>
